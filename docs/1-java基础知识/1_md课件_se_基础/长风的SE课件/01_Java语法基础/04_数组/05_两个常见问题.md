# ⑤数组操作中两个常见问题

[TOC]

---



> 大家在操作数组的过程中，不可能一帆风顺，这里列举两个最常遇到的问题

## 1. 异常简述

> 异常我们会在后续的课程中，专门的章节去讲，这里简单了解一下

- 异常
  - 当程序在运行期间出现了不正常情况，JVM会**抛出异常并终止程序**，在控制台打印异常信息
  - 异常分为两种
    - 严重的错误（Error）
    - 一般的问题（Exception）
- 异常描述的是程序在运行时期出现的一系列问题，仅仅用来描述问题



## 2. 数组下标越界异常

> 数组下标越界异常（ArrayIndexOutOfBoundsException）
>
> 原因： 当你访问了某个数组的一个不存在（不合法）的下标

- 这是一个单独针对数组操作的异常
- 这个异常在数组操作中很常见，一旦访问不合法下标，IDEA会以代码报黄的形式提醒你
  - 但是，常见碰到异常的场景是在for循环中
  - 所以在for循环中使用数组，一定要特别注意考虑下标在整个循环中的合法性



## 3. 空指针异常

### 3.1 空指针异常

> 空指针异常（NullPointerExceptionE）
>
> 原因： 当引用数据类型的引用指向了null（空常量），指向了虚无
>
> ​	这时如果程序员仍然想通过引用操作堆上对象，就会报错

- 在使用引用数据类型的过程中，都有可能碰到这个异常
  - 包括数组，String等各种引用数据类型
- 空指针异常，简称NPE，是Java之中最负盛名的异常，没有之一
  - 以后大家会天天和引用数据类型打交道，也会每天和空指针异常打交道
  - 避免空指针异常是Java程序员的必修课之一
    - 避免空指针异常最简单的方式就是if判断，判断出引用不会指向null后再使用
- 需要注意的是：
  - 我们在开发时，要明确知道程序中的引用哪里会指向null，哪里完全不会指向null
    - 对于那些可能会指向null的引用，要在使用前慎重判断，判断不为null才能使用
    - 对于那些完全不可能等于null的引用，可以适当的不做判断
      - 一旦程序抛出空指针异常，要去排查为什么引用会等于null，然后修正程序



### 3.2 长度为0的数组

> 数组长度为0和数组是null以及数组未初始化，有啥区别？

- 数组未初始化： 这个数组完全是不可用的，一旦使用编译都无法通过
- 数组长度为0和数组为null都是可以使用的，可以认为是经过初始化的，但它们都不是正常数组
  - 长度为0的数组，只在内存中存在结构但不存在存储单元，不能存任何数据
    - 直接打印数组名可以获取地址
    - 不能访问任何数组下标，会报数组下标越界异常
    - 输出数组的长度为0
  - 数组为null，表示数组的引用指向了null，数组（对象）无法进行任何操作
    - 直接打印数组名得到一个null字符串
    - 不能访问任何数组下标，也不能打印数组长度，会报空指针异常



> 长度为0的数组的经典用途

- 假如方法的返回值是一个数组，而又有**无返回数据**的需求，这个时候普遍有两种做法	
  - 返回一个长度为0的数组
  - 返回一个为null的数组
- 以上两种方式皆可，但是建议优先选装返回长度为0的数组，避免空指针异常
