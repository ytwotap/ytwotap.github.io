# ②递归的练习

[TOC]

---



## 1. 前言

> 递归本身的定义，其实是非常简单的，简单的使用递归也没有任何难度。
>
> ​	但可惜的是，生活中的问题几乎都很复杂

- 递归是很危险的，一般来说不推荐在开发中使用递归
  - 但是有些场景不得不用递归，比如不使用递归代价太大
  - 并且递归可以写出很优雅的代码
  - 递归仍然有学习的必要
- 递归的练习这一节，希望能够帮助大家了解递归的使用场景，锻炼逻辑思维能力



## 2. 案例

> 一些经典的问题

### 2.1 电影院座位问题

```
周末晚上你和对象一起去看电影，月黑风高，伸手不见五指

对象悄悄地问你：我们现在在第几排？（排除作弊的方法，只能数）
```

> 利用递归的思想：

- 我的座位的排数 = 1 + 前面一排的人的排数
- 前面一排的人的排数 = 1 + 再前面一排的

​    .....

- 第一排的人 = 1





### 2.2 汉诺塔问题

> 汉诺塔（Hanoi）问题，是经典的递归问题，学习递归一般绕不开该问题
>
> 汉诺塔问题描述

```
相传在古印度的圣庙中，有一种被称之为汉诺塔（也叫河内塔，Hanoi）的游戏
简单来说：有三个塔1，2，3，塔1上有 N 个（N>1）穿孔圆盘，大盘在下，小盘在上
要求按下列规则将所有圆盘移至塔3：
	1，每次只能移动一个圆盘
	2，大盘一定在小盘之下
提示：可将圆盘临时置于塔2，也可以将塔1的圆盘重新移回塔1，但都必须遵循上述两条规则
问：当塔1上有N（N>=1）个圆盘时，最少要移动多少次？（注意是最少）
```

> 现做以下分析：

1. 当N = 1时，直接把盘子从塔1到塔3，仅需1步
2. 当N=2时，先把小盘子移到塔2，再把大盘子移到塔3，最后把小盘子放入塔3，共3步
3. 当N=3时，先把最小的盘子移到塔3，再把中间的盘子移到塔2
   - 然后把最小的盘子移到塔2，最大的盘子移到塔3
   - 随后最小的盘子移到塔1，中间的盘子移到塔3，最小的盘子移到塔3，共7步

  .....

- 不难得出结论，要想塔1的盘子全部移到塔3，无非三步
  1. 步骤1：将塔1上，除了最大的那个盘子外的所有盘子，移到塔2上，塔3没有任何盘子
     - 注意，这个时候塔2的盘子必然是从上到下，从小到大的，这个过程要借助塔3做中转
  2. 步骤2：将塔1上的最大的那个盘子，移到空的塔3上
  3. 将塔2中的盘子都挪到塔3上，这个过程要借助塔1中转

- 更进一步用数字描述这个过程
  1. 步骤1：N-1个盘子从盘1到盘2（实际就是一个盘子移动另一个盘子，只不过是N-1个盘子）
  2. 步骤2：第N个盘子移动盘3去，需要1步
  3. 步骤3：N-1个盘子从盘2到盘3（实际就是一个盘子移动另一个盘子，只不过是N-1个盘子）
- 于是：

```
对于N个盘子，假设至少需要f(N)步完成汉诺塔问题
那么可以做以下分解：
	步骤1：需要f(N-1)步
	步骤2：1步
	步骤3：f(N-1)步
f(N-1)仍然可以继续分解
....
最终，f(1) = 1
```

- 以上，完美符合递归的递归，找出递归体和递归出口，即可写出递归代码



> 神话传说中的汉诺塔

```
大梵天创造世界的时候做了三根金刚石石柱，在一根柱子上从下往上按照大小顺序摞着64片黄金圆盘。
大梵天命令婆罗门把圆盘从下面开始按大小顺序重新摆放在另一根柱子上。
并且规定，在小圆盘上不能放大圆盘，在三根柱子之间一次只能移动一个圆盘。
僧侣们预言，当所有的金片都从梵天穿好的那根针上移到另外一根针上时，
世界就将在一声霹雳中消灭，而梵塔、庙宇和众生也都将同归于尽。
```

- 实际上僧侣要想将所有金片都移到另一根柱子上，至少需要2的64次方减1次，
- 即便是一秒移动一次，也大概需要5800亿年
- 这个时间远大于当前的宇宙时间（150亿年）和地球历史（46亿年）
  - 也许僧侣们说的是真的！哈哈
