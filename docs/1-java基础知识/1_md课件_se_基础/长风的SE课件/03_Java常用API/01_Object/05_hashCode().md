# hashCode()

> public int hashCode()
>
> hashCode() 概述

- 语法

  ```Java
  对象名.hashCode()
  ```

- 通过一个哈希（散列）函数，返回该对象的哈希（码）值

- 支持此方法是为了提高哈希表的性能（主要是集合体系中用）





> 映射的概念

- 设A和B是两个非空集合，并存在某种对应关系f
- 按照这种对应关系f，对于集合A中的任何一个元素a，在集合B中都存在唯一的一个元素素b与之对应
- 那么，这样的对应（包括集合A，B，以及集合A到集合B的对应关系f）叫做集合A到集合B的映射

> 总得来说

- 在映射的定义中，集合A中的任一元素都在集合B中有唯一元素对应
- 函数是特殊定义的映射
  - 在中学数学中，集合A和B都必须是数集，而在高等数学中，只有值域被限制为数集



> 通过映射的定义，我们引入hash相关概念

- 哈希函数（哈希映射）
  - 把任意（不限制）大小的数据集合A中的元素a，唯一地映射到固定大小集合B中的元素b上
  - 这种对应关系，称之为哈希函数（方法）或者哈希算法
- hashCode()方法的哈希函数
    - 任意数据大小的集合就是对象的集合，固定大小的数据集合int
    - 不同的对象返回不同的整数
  
- 哈希值
  - 由哈希函数从集合A唯一映射到的集合B中的元素，被称之为哈希值

- 哈希冲突
  - 理想状态下的哈希函数，除了应该满足映射定义，唯一的将集合A中的元素映射到集合B中外
    - 我们还希望集合A和B中元素**最好能够**一一对应
  - 然而实际情况中，总是会存在两个集合A中的不同元素映射到了集合B中的同一个元素上
    - 这种现象，我们称之为：“hash冲突”

​		

> Object类中hashCode()方法

- 该方法是一个native方法，本地方法

- 通过将该对象的内部地址转换成一个整数来实现，但是不是通过Java语言去实现（C/C++）





> Object类中的hashCode()方法不能满足我们的需求
>
> 如果想要重写该方法，那么重写hashCode()方法的常规协定是：

- 在 Java 应用程序执行期间，在对同一对象多次调用 hashCode 方法时，必须一致地返回相同的整数。
  - 前提是将对象进行 equals 比较时所用的信息没有被修改（哈希值是根据成员变量来计算的）
  - 从某一应用程序的一次执行到同一应用程序的另一次执行，该整数无需保持一致
- 如果根据 equals(Object) 方法，两个对象是相等的
  - 那么对这两个对象中的每个对象调用 hashCode 方法都必须生成相同的整数结果。 
- 如果根据 equals(java.lang.Object) 方法，两个对象不相等
  - 那么对这两个对象中的任一对象上调用 hashCode 方法不要求一定生成不同的整数结果
  - 但是，程序员应该意识到，为不相等的对象生成不同整数结果可以提高哈希表的性能。





> 扩展
>
> hashCode()方法是会返回一个对应于当前对象的一个整数，为了将来在集合中更快捷的查找对象

- 集合类似于数组，但不同的是集合中只能装对象
- Java中的集合类 hashMap、hashSet 底层的实现都是哈希表，之所以采用哈希表
  - 是因为他能克服链表和二叉树等数据结构在查询上的低效率问题
  - 哈希表的存储，就是根据对象的哈希值，以此确定他的存储位置

